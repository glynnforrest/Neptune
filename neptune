#!/usr/bin/php
<?php

//this script needs to be in the root directory of your app to work properly.
//Make sure that you have run `composer install` if the autoloader isn't working.
include('vendor/autoload.php');

use Neptune\Core\Config;
use Neptune\Console\Application;
use Neptune\Console\OutputFormatter;

use Symfony\Component\Console\Output\ConsoleOutput;

$output = new ConsoleOutput();
$output->setFormatter(new OutputFormatter());

//load neptune config
$config = 'config/neptune.php';

if(file_exists($config)) {
	$c = Config::load('neptune', $config);
} else {
	$output->writeln('No neptune config file found!');
	$output->writeln('You should run <info>create:config</info> to create <info>config/neptune.php</info>');
	$output->writeln('Creating temporary neptune config...');
	$c = Config::create('neptune', $config);
	$c->set('dir.neptune', __DIR__ . '/vendor/glynnforrest/neptune/');
}

$c->set('dir.root', __DIR__ . '/');
$c->set('dir.app', __DIR__ . '/app/');

//off we go
$app = new Application();

$app->run(null, $output);
