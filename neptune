#!/usr/bin/php
<?php

//this script needs to be in the root directory of your app to work properly.
//Make sure that you have run `composer install` if the autoloader isn't working.
include('vendor/autoload.php');

use Neptune\Tasks\TaskRunner;
use Neptune\Core\Config;

//load neptune cli config
$config = 'config/neptune.php';
if(file_exists($config)) {
	Config::load($config, 'neptune');
} else {
	Config::create($config, 'neptune');
	Config::set('neptune#dir.root', __DIR__);
	Config::set('neptune#dir.app', __DIR__ . '/app');
	Config::save('neptune');
}

//prepare the command string
unset($_SERVER['argv'][0]);
$cmd = implode($_SERVER['argv'], ' ');

//off we go
TaskRunner::getInstance()->run($cmd);
